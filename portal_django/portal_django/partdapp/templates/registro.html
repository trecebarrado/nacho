{% extends "base.html" %}

{% block title %}Particularia - Registrar anuncio{% endblock %}

{% block content %}
<div class="hide-on-small-only">
	<div class="carousel carousel-slider">
        <a class="carousel-item"><img src="../static/images/slide3.jpg"></a>
        <a class="carousel-item"><img src="../static/images/slide4a.jpg"></a>
		<a class="carousel-item"><img src="../static/images/slide2a.jpg"></a>
		<a class="carousel-item"><img src="../static/images/slide1a.jpg"></a>
	</div>
</div>

<div class="container">
		<div class="hide-on-small-only">
			<h3 style="margin-top: 10px">Anuncia tus clases</h3>
		</div>
		<div class="hide-on-med-and-up" style="text-align:center;">
			<h4 style="margin-top: 10px">Anuncia tus clases</h4>
		</div>
	<br>

<div style = "padding: 0 5px; 0 5px;">
	<form action="grabar-anuncio" method="POST" enctype="multipart/form-data" class="col s12">
	{% csrf_token %}
		<div class="row">
			<div class="input-field col s12 m4">
			    <input id="nombre" type="text" name="nom" maxlength="20" pattern="^[a-zA-ZáéíóúÁÉÍÓÚñÑ ]{2,20}$" required/>
			    <label for="nombre">Nombre*</label>
			</div>
			<div class="input-field col s12 m5">
			    <input id="apell" type="text" name="apell" maxlength="30" pattern="^[a-zA-ZáéíóúÁÉÍÓÚñÑ ]{2,30}$" required/>
			    <label for="apell">Apellidos*</label>
			</div>
			<div class="input-field col s12 m3">
				<select id="materias" name="materia">
					<option value="0" disabled selected style="color:grey;">Materia que impartes*</option>
<!--  					{% for m in materias %}
					<option value="{{m.id}}">{{m.materia}}</option>
					{% endfor %} -->
 					<option value="1">Idiomas</option>
					<option value="2">Informática/Tecnología</option>
					<option value="3">Escolar/Universitaria</option>
					<option value="4">Oposiciones</option>
					<option value="5">Arte/Música</option>
				</select>
			</div>
		</div>

		<div class="row">
			<div class="input-field col s12 m12">
			<textarea id="desc" class="materialize-textarea" name="descripcion" minlength="10" maxlength="300" data-length="300" required></textarea>
			<label for="desc">Describe tus clases*</label>
			</div>
		</div>

		<div class="row">
			<div class="input-field col s12 m5">
			<p style="color:black;">
			Horario de clases* &nbsp;&nbsp;&nbsp;
			<label>
				<input type="checkbox" id="c1" checked="checked" value="on" name="am" onchange="checks()"/>
				<span>Mañana</span>
			</label>  &nbsp; &nbsp; &nbsp;
			<label>
				<input type="checkbox" value="on" name="pm" onchange="checks()"/>
				<span>Tarde</span>
			</label>
			</p>
			</div>
			<div class="input-field col s12 m2">
				<input id="precio" type="text" name="precio" maxlength="6" pattern="^\d{0,3}((\.|,)\d{0,2})?$" required/>
				<label for="precio">Precio/hora*</label>
			</div>
			<div>
				<div class="input-field col s12 offset-m1 m4" style="margin-bottom: 0;">
					<div class="file-field input-field" style="margin-top: 0;">
						<div class="btn">
						  <span>Foto de perfil</span>
						  <input type="file" name="foto">
						</div>
						<div class="file-path-wrapper">
							<input class="file-path validate" type="text">
						</div>
					</div>
				</div>
			</div>
		</div>

		<div class="row">
			<div class="input-field col s12 m5" style="margin-bottom: 5px;">
				<input id="tfno" type="text" name="telefono" maxlength="9" pattern="[6-9]{1}[0-9]{8}" required/>
				<label for="tfno">Teléfono de contacto*</label>
			</div>
			<div class="input-field col s12 m7" style="margin-bottom: 5px;">
				<input id="mail" type="text" name="email" pattern="[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,}$" required/>
				<label for="mail">E-mail de contacto*</label>
			</div>
		</div>
		<div class="row">
		    <br class="hide-on-med-and-up">
			<div class="input-field col m5" style="margin-top: 0;">
				<p style="margin-top: 0;">
					<label>
						<input type="checkbox" value="tp_on" name="ctp"/>
						<span>Mostrar teléfono en el anuncio</span>
					</label>
				</p>
			</div>
			<div class="input-field col m7" style="margin-top: 0;">
				<p style="margin-top: 0;">
					<label>
						<input type="checkbox" value="ep_on" name="cep"/>
						<span>Mostrar e-mail en el anuncio</span>
					</label>
				</p>
			</div>
		</div>
		<br><!--<div style="color:#9e9e9e;font-style:italic;">* Campos obligatorios</div><br class="hide-on-med-and-up"><br class="hide-on-small-only">-->
		<div col s12>
		    <div>
			    <button class="waves-effect waves-light btn" type="submit" style="font-size: 18px; width: 300px; margin-left: -1px; margin-right: 20px;" onclick="return opcion()">REGISTRAR</button>
			<p class="hide-on-med-and-up"></p>
			    <a class="waves-effect waves-light btn" href="listado" style="font-size: 18px; width: 150px; margin-left: -1px;">VOLVER</a>
			</div>
		</div>
	</form>
</div>
</div>

<br><br><br><br class="hide-on-small-only">
{% endblock %}

{% block scripts %}
<script>
document.addEventListener('DOMContentLoaded', function() {
    var elems = document.querySelectorAll('select');
    var instances = M.FormSelect.init(elems);
});
</script>

<script>
document.addEventListener('DOMContentLoaded', function() {
  var options = {
      indicators: true
  };
  var elems = document.querySelectorAll('.carousel');
  var instances = M.Carousel.init(elems, options);
});
</script>

<!-- <script>
document.addEventListener('DOMContentLoaded', function() {
	  var options = {
		      indicators: true
		  };
    var elems = document.querySelectorAll('.slider');
    var instances = M.Slider.init(elems, options);
  });
</script> -->

<script>
    function checks() {
    var checkboxes = document.querySelectorAll('input[type="checkbox"]');
    var checkedOne = Array.prototype.slice.call(checkboxes).some(x => x.checked);
    if (checkedOne) {
    		console.log("ok");
            } else {
				M.toast({html: 'Al menos un horario debe estar seleccionado.'})
                document.getElementById("c1").checked = "checked";
            }
    }
</script>

<script>
    function opcion() {
        var sel = document.getElementById("materias");
        var opt = sel.options[sel.selectedIndex].value;
		if (opt == "0") {
			M.toast({html: 'Por favor, elige una Materia'})
            return false;
        }
	}
</script>

<script>
$(document).ready(function() {
    $('textarea#desc').characterCounter();
  });
</script>
{% endblock %}